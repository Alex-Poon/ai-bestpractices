{{ define "main" }}
{{ partial "hero.html" . }}

<div class="page-container">
  {{/* Three entry points */}}
  <section class="home-section">
    <div class="card-grid" style="grid-template-columns: repeat(3, 1fr);">
      {{/* Start the Guide */}}
      {{ with site.GetPage "/guide" }}
      <div class="start-here-card">
        <a href="{{ .RelPermalink }}" class="start-here-link">
          <span class="start-here-badge">New to this?</span>
          <h2 style="font-size: var(--text-xl);">Start the Guide</h2>
          <p>A sequential reading path from first principles to productive AI-assisted development.</p>
          <span class="start-here-cta">Begin reading &rarr;</span>
        </a>
      </div>
      {{ end }}

      {{/* Pick a Debate */}}
      {{ with site.GetPage "/debates" }}
      <div class="start-here-card" style="border-color: var(--color-debates);">
        <a href="{{ .RelPermalink }}" class="start-here-link">
          <span class="start-here-badge" style="background: rgba(245,158,11,0.1); color: var(--color-debates);">Dive deeper</span>
          <h2 style="font-size: var(--text-xl);">Pick a Debate</h2>
          <p>{{ len .RegularPages }} open questions where the community genuinely disagrees. Both sides, strongest arguments.</p>
          <span class="start-here-cta" style="color: var(--color-debates);">Explore debates &rarr;</span>
        </a>
      </div>
      {{ end }}

      {{/* Hear from Practitioners */}}
      {{ with site.GetPage "/voices" }}
      <div class="start-here-card" style="border-color: var(--color-voices);">
        <a href="{{ .RelPermalink }}" class="start-here-link">
          <span class="start-here-badge" style="background: rgba(251,113,133,0.1); color: var(--color-voices);">Real voices</span>
          <h2 style="font-size: var(--text-xl);">Practitioner Voices</h2>
          <p>Curated insights from developers who've gone deep with AI coding tools. Real experience, not marketing.</p>
          <span class="start-here-cta" style="color: var(--color-voices);">Read voices &rarr;</span>
        </a>
      </div>
      {{ end }}
    </div>
  </section>

  {{/* Practices */}}
  {{ $practices := (site.GetPage "/practices").RegularPages }}
  {{ if $practices }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Practices</h2>
      <a href="{{ with site.GetPage "/practices" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range first 4 ($practices.ByWeight) }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Tools */}}
  {{ $tools := (site.GetPage "/tools").RegularPages }}
  {{ if $tools }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Tool Landscape</h2>
      <a href="{{ with site.GetPage "/tools" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $tools.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Evidence */}}
  {{ $evidence := (site.GetPage "/evidence").RegularPages }}
  {{ if $evidence }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Evidence &amp; Case Studies</h2>
      <a href="{{ with site.GetPage "/evidence" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range first 3 ($evidence.ByWeight) }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Landscape */}}
  {{ $landscape := (site.GetPage "/landscape").RegularPages }}
  {{ if $landscape }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Landscape</h2>
      <a href="{{ with site.GetPage "/landscape" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $landscape.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Latest Sources */}}
  {{ $sources := (site.GetPage "/sources").RegularPages }}
  {{ if $sources }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Latest Sources</h2>
      <a href="{{ with site.GetPage "/sources" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range first 4 ($sources.ByDate.Reverse) }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Browse by Topic */}}
  <section class="home-section">
    <h2 class="home-section-title">Browse by Topic</h2>
    <div class="tag-cloud">
      {{ range site.Taxonomies.tags.ByCount }}
        <a href="{{ .Page.RelPermalink }}" class="tag-cloud-item">
          {{ .Page.Title }}
          <span class="tag-count">{{ .Count }}</span>
        </a>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}

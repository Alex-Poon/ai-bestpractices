{{ define "main" }}
{{ partial "hero.html" . }}

<div class="page-container">
  {{/* Start Here */}}
  {{ with site.GetPage "/start-here" }}
  <section class="home-section">
    <div class="start-here-card">
      <a href="{{ .RelPermalink }}" class="start-here-link">
        <span class="start-here-badge">Start Here</span>
        <h2>{{ .Title }}</h2>
        <p>{{ .Description }}</p>
        <span class="start-here-cta">Read the guide &rarr;</span>
      </a>
    </div>
  </section>
  {{ end }}

  {{/* Core Skills */}}
  {{ $skills := (site.GetPage "/skills").RegularPages }}
  {{ if $skills }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Core Skills</h2>
      <a href="{{ with site.GetPage "/skills" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $skills.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Tools */}}
  {{ $tools := (site.GetPage "/tools").RegularPages }}
  {{ if $tools }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Tool Landscape</h2>
      <a href="{{ with site.GetPage "/tools" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $tools.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Workflows */}}
  {{ $workflows := (site.GetPage "/workflows").RegularPages }}
  {{ if $workflows }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Workflows</h2>
      <a href="{{ with site.GetPage "/workflows" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $workflows.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Latest Synthesis */}}
  {{ $synthesis := (site.GetPage "/synthesis").RegularPages }}
  {{ with first 1 $synthesis }}
  <section class="home-section">
    <h2 class="home-section-title">Latest Synthesis</h2>
    <div class="featured-card">
      {{ range . }}
      <a href="{{ .RelPermalink }}" class="featured-card-link">
        <span class="featured-badge">Synthesis</span>
        <h3>{{ .Title }}</h3>
        <p>{{ .Description }}</p>
        <span class="featured-meta">{{ .ReadingTime }} min read</span>
      </a>
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Landscape */}}
  {{ $landscape := (site.GetPage "/landscape").RegularPages }}
  {{ if $landscape }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Landscape</h2>
      <a href="{{ with site.GetPage "/landscape" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $landscape.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Evidence */}}
  {{ $evidence := (site.GetPage "/evidence").RegularPages }}
  {{ if $evidence }}
  <section class="home-section">
    <div class="home-section-header">
      <h2 class="home-section-title">Evidence &amp; Case Studies</h2>
      <a href="{{ with site.GetPage "/evidence" }}{{ .RelPermalink }}{{ end }}" class="section-link">View all &rarr;</a>
    </div>
    <div class="card-grid">
      {{ range $evidence.ByWeight }}
        {{ partial "card.html" . }}
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Browse by Topic */}}
  <section class="home-section">
    <h2 class="home-section-title">Browse by Topic</h2>
    <div class="tag-cloud">
      {{ range site.Taxonomies.tags.ByCount }}
        <a href="{{ .Page.RelPermalink }}" class="tag-cloud-item">
          {{ .Page.Title }}
          <span class="tag-count">{{ .Count }}</span>
        </a>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}

{{ define "main" }}
<div class="page-container">
  {{ partial "breadcrumbs.html" . }}

  {{/* Guide progress indicator */}}
  {{ $guidePages := (site.GetPage "/guide").RegularPages.ByWeight }}
  {{ $currentIndex := 0 }}
  {{ range $i, $p := $guidePages }}
    {{ if eq $p.RelPermalink $.RelPermalink }}{{ $currentIndex = $i }}{{ end }}
  {{ end }}
  <div class="guide-progress">
    {{ range $i, $p := $guidePages }}
      <div class="guide-progress-step{{ if lt $i $currentIndex }} guide-progress-step--done{{ else if eq $i $currentIndex }} guide-progress-step--active{{ end }}"></div>
    {{ end }}
  </div>

  <div class="article-layout{{ if and .TableOfContents (gt .WordCount 500) }} has-toc{{ end }}">
    <article class="article">
      <header class="article-header">
        <h1 class="article-title">{{ .Title }}</h1>
        {{ partial "meta-bar.html" . }}
      </header>

      <div class="article-content">
        {{ .Content }}
      </div>

      <nav class="article-nav">
        {{ with .PrevInSection }}
        <a href="{{ .RelPermalink }}" class="article-nav-link article-nav-link--prev">
          <span class="article-nav-direction">Previous</span>
          <span class="article-nav-title">{{ .Title }}</span>
        </a>
        {{ end }}
        {{ with .NextInSection }}
        <a href="{{ .RelPermalink }}" class="article-nav-link article-nav-link--next">
          <span class="article-nav-direction">Next</span>
          <span class="article-nav-title">{{ .Title }}</span>
        </a>
        {{ end }}
      </nav>
    </article>

    {{ partial "toc.html" . }}
  </div>
</div>
{{ end }}
